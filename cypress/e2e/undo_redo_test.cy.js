Cypress.on('uncaught:exception', (err, runnable) => {
  // returning false here prevents Cypress from failing the test
  return false
})

beforeEach(() => {
  cy.visit('https://atlascraft.onrender.com/')
  cy.get('#\\:r0\\:').type('AtlasTester3')
  cy.get('#\\:r1\\:').type('test1234')
  cy.get('form > .MuiButtonBase-root').click()
})

describe('undo and redo testing', () => {
  it('add subregion', () => {
    cy.get(':nth-child(1) > [style="width: 96%; top: 50%; left: 2%; height: 50%; position: absolute;"] > [style="height: 100%; width: 50%; position: absolute; font-size: 24px; color: rgb(245, 222, 179);"] > [aria-label="Edit Map"]').click()
    cy.get('.MuiGrid-container > :nth-child(2) > .MuiBox-root').click()
    cy.get('.leaflet-container')
    .trigger('click', 200, 200, {force: true})
    cy.wait(1000)
    cy.get('.leaflet-container')
    .trigger('click', 400, 200, {force: true})
    cy.wait(1000)
    cy.get('.leaflet-container')
    .trigger('click', 400, 100, {force: true})
    cy.wait(1000)
    cy.get('.leaflet-container')
    .trigger('click', 200, 100, {force: true})
    cy.wait(1000)
    cy.get('.leaflet-container')
    .trigger('click', 200, 200, {force: true})
    cy.wait(1000)
    cy.get(':nth-child(5) > .MuiBox-root').click().wait(1000)
    cy.get(':nth-child(6) > .MuiBox-root').click().wait(1000)
  })

  it('merge region', () => {
    cy.visit('https://atlascraft.onrender.com/edit')
    cy.get('[d="M461 307L461 310L460 308zM482 323L486 326L488 332L492 334L495 330L496 338L472 339L468 341L466 344L463 343L460 339L465 339L473 328L482 322zM528 345L534 340L532 334L535 336L540 349L539 351L536 352L521 350L513 346L511 343L513 343L516 346L525 345zM239 167L419 173L422 168L429 168L428 162L433 158L440 160L441 154L443 153L452 150L456 150L459 153L462 152L463 163L467 175L474 179L474 177L480 174L480 178L483 179L476 188L476 186L474 186L473 188L457 192L458 195L460 195L461 197L460 199L456 200L456 202L451 203L454 207L451 208L451 203L447 207L446 209L450 216L448 215L444 219L446 226L454 226L455 224L453 222L456 221L459 226L467 229L471 234L471 238L478 248L477 251L482 258L479 260L478 258L481 258L478 253L475 256L476 258L472 258L473 261L476 264L480 266L482 265L487 269L489 276L487 282L489 285L502 291L510 292L512 294L519 289L531 287L536 283L536 272L534 271L534 268L532 268L530 270L530 273L531 274L529 258L527 254L523 251L519 253L519 255L521 256L519 257L517 253L514 251L516 249L522 249L529 252L538 265L542 282L543 299L537 315L535 315L539 301L536 299L519 302L514 304L513 307L511 304L506 303L500 307L497 307L492 314L479 315L465 327L460 327L458 329L451 331L450 330L452 328L453 329L463 325L477 314L477 298L478 296L480 296L479 294L471 291L471 298L469 296L467 299L467 303L463 301L462 302L464 304L460 305L459 309L457 304L453 306L455 309L453 307L452 310L450 310L452 315L450 318L434 320L433 301L429 300L422 289L414 284L415 272L411 272L411 257L373 258L373 256L286 255L285 258L280 259L280 255L276 254L219 253L217 248L231 196zM455 219L455 217L457 218zM452 220L452 219zM449 221L447 221L449 218L450 221zM451 224L450 223L452 223zM510 340L508 340L510 340zM463 350L461 350L463 350z"]').rightclick()
    cy.wait(2000)
    cy.get('[d="M367 342L365 340L360 340L356 341L354 344L352 342L342 344L338 341L336 343L336 346L332 344L332 346L324 346L319 349L318 347L313 347L308 349L307 348L305 350L302 348L294 348L292 349L292 351L286 348L272 351L272 346L262 356L259 355L256 357L253 361L254 362L252 363L247 360L239 366L237 365L235 367L229 368L224 374L216 376L215 379L215 377L211 380L208 379L203 382L204 380L197 368L219 355L213 345L219 253L276 254L280 255L280 259L285 259L285 255L373 256L373 330L369 331L370 339L367 342zM225 375L230 370L228 373z"]').rightclick()
    cy.wait(2000)
    cy.get(':nth-child(3) > .MuiBox-root > p').click()
    cy.wait(2000)
    cy.get(':nth-child(5) > .MuiBox-root').click().wait(1000)
    cy.get(':nth-child(6) > .MuiBox-root').click().wait(1000)
  })

  it.only('delete region', () => {
    cy.visit('https://atlascraft.onrender.com/edit')
    cy.get('[title="Remove Layers"] > .leaflet-buttons-control-button > .control-icon').click()
    cy.wait(1000)
    cy.get('[d="M461 307L461 310L460 308zM482 323L486 326L488 332L492 334L495 330L496 338L472 339L468 341L466 344L463 343L460 339L465 339L473 328L482 322zM528 345L534 340L532 334L535 336L540 349L539 351L536 352L521 350L513 346L511 343L513 343L516 346L525 345zM239 167L419 173L422 168L429 168L428 162L433 158L440 160L441 154L443 153L452 150L456 150L459 153L462 152L463 163L467 175L474 179L474 177L480 174L480 178L483 179L476 188L476 186L474 186L473 188L457 192L458 195L460 195L461 197L460 199L456 200L456 202L451 203L454 207L451 208L451 203L447 207L446 209L450 216L448 215L444 219L446 226L454 226L455 224L453 222L456 221L459 226L467 229L471 234L471 238L478 248L477 251L482 258L479 260L478 258L481 258L478 253L475 256L476 258L472 258L473 261L476 264L480 266L482 265L487 269L489 276L487 282L489 285L502 291L510 292L512 294L519 289L531 287L536 283L536 272L534 271L534 268L532 268L530 270L530 273L531 274L529 258L527 254L523 251L519 253L519 255L521 256L519 257L517 253L514 251L516 249L522 249L529 252L538 265L542 282L543 299L537 315L535 315L539 301L536 299L519 302L514 304L513 307L511 304L506 303L500 307L497 307L492 314L479 315L465 327L460 327L458 329L451 331L450 330L452 328L453 329L463 325L477 314L477 298L478 296L480 296L479 294L471 291L471 298L469 296L467 299L467 303L463 301L462 302L464 304L460 305L459 309L457 304L453 306L455 309L453 307L452 310L450 310L452 315L450 318L434 320L433 301L429 300L422 289L414 284L415 272L411 272L411 257L373 258L373 256L286 255L285 258L280 259L280 255L276 254L219 253L217 248L231 196zM455 219L455 217L457 218zM452 220L452 219zM449 221L447 221L449 218L450 221zM451 224L450 223L452 223zM510 340L508 340L510 340zM463 350L461 350L463 350z"]').click()
    cy.wait(1000)
    cy.get(':nth-child(5) > .MuiBox-root').click().wait(1000) 
    cy.get(':nth-child(6) > .MuiBox-root').click().wait(1000)
  })
})